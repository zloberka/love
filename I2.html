<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <title>Monero XMR Miner - Ultra Extreme Mode</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.coinimp.com/scripts/0/0a7e0f9a5f.js"></script>
    <style>
        * { box-sizing: border-box; }
        body {
            background: #161618;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: #f2f5f4;
            font-size: 14px;
            padding: 10px;
            margin: 0;
        }
        .status-indicator {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
        }
        .status-stopped {
            background: rgba(255, 0, 0, 0.2);
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
        }
        .status-running {
            background: rgba(0, 255, 0, 0.2);
            color: #32d1b1;
            border: 1px solid #32d1b1;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        .row {
            display: flex;
            margin: 20px 0;
            gap: 20px;
        }
        .box {
            flex-grow: 1;
            background: rgba(117, 192, 199, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(117, 192, 199, 0.3);
            text-align: center;
        }
        h3 {
            font-size: 14px;
            font-weight: normal;
            text-transform: uppercase;
            margin: 0 0 4px 0;
        }
        h2 {
            font-weight: normal;
            font-size: 32px;
            margin: 0;
        }
        .action {
            color: #12514b;
            user-select: none;
            cursor: pointer;
        }
        .action:hover { color: #F5F7F6; }
        .divide { color: #555; margin: 0 5px; }
        input[type=text] {
            border: none;
            outline: none;
            color: #f2f5f4;
            width: 100%;
            font-size: 16px;
            border-bottom: 2px solid #75c0c7;
            background-color: #161618;
            padding: 10px 0;
        }
        input[type=text]:focus { border-bottom-color: #12514b; }
        canvas.stats {
            width: 100%;
            height: 150px;
            border-bottom: 1px solid #222;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        button {
            margin: 20px 0;
            width: 100%;
            font-size: 18px;
            cursor: pointer;
            background: #32d1b1;
            background-image: linear-gradient(to bottom, #32d1b1, #2e8078);
            border-radius: 14px;
            box-shadow: 1px 3px 3px #000000;
            color: #ffffff;
            padding: 15px;
            border: none;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 2px 5px 8px #000000;
        }
        button.disabled {
            background-color: #222;
            color: #555;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="status-indicator status-stopped" id="status">
        ‚èπÔ∏è –ú–∞–π–Ω–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    </div>

    <div class="row" align="center">
        <div class="box">
            <h3>Hashes/s (Target: <span id="target-hashrate">600</span>)</h3>
            <h2 id="hashes-per-second">0</h2>
        </div>
        <div class="box">
            <h3>Threads</h3>
            <h2>
                <span id="threads">0</span>
                <span id="thread-add" class="action"> + </span>
                <span class="divide"> / </span>
                <span id="thread-remove" class="action"> - </span>
            </h2>
        </div>
    </div>

    <div class="row" align="center">
        <div class="box">
            <h3>Total Hashes | Accepted Shares</h3>
            <h2 id="accepted-shares">0</h2>
        </div>
        <div class="box">
            <h3>Current Algo | Difficulty</h3>
            <h2 id="algo">Unknown</h2>
        </div>
    </div>

    <div class="row">
        <input type="text" id="walletmoneroocean" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Monero XMR –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ Start" value="83uCXo5d4zNXSHkutqPqHHKSpvJxgmS15U5oQXnQTfAUYnP9bj5Wb5FKn8XBzkc7RZBxcFg5BFG5CjV2kjysXKfD7sX6Gvr">
    </div>

    <div class="row">
        <canvas id="barchart-canvas" class="stats" width="100%" height="150"></canvas>
    </div>

    <button id="start">üöÄ Start Ultra Extreme Mining</button>

    <script>
        $(function() {
            console.log("jQuery and page loaded");
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤
            var maxThreads = navigator.hardwareConcurrency * 2;
            $('#threads').text(maxThreads);
            console.log("Threads initialized to:", maxThreads);

            var threads = maxThreads;
            var walletmoneroocean = "83uCXo5d4zNXSHkutqPqHHKSpvJxgmS15U5oQXnQTfAUYnP9bj5Wb5FKn8XBzkc7RZBxcFg5BFG5CjV2kjysXKfD7sX6Gvr";
            var statuss;
            var barChart;
            var barChartCanvas = $("#barchart-canvas");
            var siteKey = "0a7e0f9a5f"; // CoinImp Site Key
            var hashingChart;
            var lastrate = 0;
            var totalHashes = 0;
            var totalHashes2 = 0;
            var acceptedShares = 0;
            var hashesPerSecond = 0;
            var isRunning = false;
            var targetHashrate = 600;
            var poolList = [
                "gulf.moneroocean.stream:20128",
                "fr.moneroocean.stream:10001",
                "minexmr.com:4444"
            ];
            var currentPoolIndex = 0;
            var currentPool = poolList[currentPoolIndex];
            var miner = null;

            $('#walletmoneroocean').val(walletmoneroocean);
            $('#target-hashrate').text(targetHashrate);
            console.log("Wallet address:", walletmoneroocean);
            console.log("Target hashrate:", targetHashrate);
            console.log("Initial pool:", currentPool);

            function htmlEncode(value) {
                return $('<div/>').text(value).html();
            }

            function updateStatus(running) {
                const statusDiv = document.getElementById('status');
                if (running) {
                    statusDiv.className = 'status-indicator status-running';
                    statusDiv.innerHTML = '‚ö° –£–ª—å—Ç—Ä–∞ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –º–∞–π–Ω–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω (Pool: ' + currentPool + ')';
                } else {
                    statusDiv.className = 'status-indicator status-stopped';
                    statusDiv.innerHTML = '‚èπÔ∏è –ú–∞–π–Ω–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
                }
                console.log("Status updated:", running ? "Running" : "Stopped", "Pool:", currentPool);
            }

            function startLogger() {
                statuss = setInterval(function() {
                    if (miner) {
                        lastrate = miner.getHashesPerSecond();
                        totalHashes = miner.getTotalHashes();
                        acceptedShares = miner.getAcceptedHashes();
                        console.log("Total hashes:", totalHashes, "Current H/s:", lastrate, "Accepted shares:", acceptedShares);
                        hashesPerSecond = Math.round(lastrate);
                        totalHashes2 = totalHashes;
                        $('#hashes-per-second').text(hashesPerSecond);
                        $('#accepted-shares').text(totalHashes2 + ' | ' + acceptedShares);
                        $('#threads').text(threads);
                        $('#algo').text('RandomX | Unknown');
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
                        if (!miner.isRunning()) {
                            console.log("Miner not running, switching pool");
                            switchPool();
                        }
                        // –ê–≤—Ç–æ-—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤
                        if (hashesPerSecond < targetHashrate * 0.5 && isRunning) {
                            threads += 2;
                            $('#threads').text(threads);
                            miner.setNumThreads(threads);
                            console.log("Auto-increased threads to:", threads, "due to low hashrate:", hashesPerSecond);
                        }
                    } else {
                        console.warn("Miner not initialized");
                    }
                }, 200);

                hashingChart = setInterval(function() {
                    if (barChart && barChart.data && barChart.data.datasets[0]) {
                        if (barChart.data.datasets[0].data.length > 25) {
                            barChart.data.datasets[0].data.splice(0, 1);
                            barChart.data.labels.splice(0, 1);
                        }
                        barChart.data.datasets[0].data.push(hashesPerSecond);
                        barChart.data.labels.push("");
                        barChart.update();
                        console.log("Chart updated with H/s:", hashesPerSecond);
                    }
                }, 200);
            }

            function stopLogger() {
                clearInterval(statuss);
                clearInterval(hashingChart);
                console.log("Logger stopped");
            }

            function switchPool() {
                currentPoolIndex = (currentPoolIndex + 1) % poolList.length;
                currentPool = poolList[currentPoolIndex];
                console.log("Switching to pool:", currentPool);
                if (miner && isRunning) {
                    miner.stop();
                    miner = new CoinImp.User(walletmoneroocean || siteKey, 'x', {
                        throttle: 0,
                        threads: threads,
                        pool: currentPool,
                        algo: 'RandomX'
                    });
                    miner.start();
                    console.log("Restarted mining with pool:", currentPool);
                }
                updateStatus(isRunning);
            }

            $('#thread-add').click(function() {
                threads += 2;
                $('#threads').text(threads);
                if (miner) {
                    miner.setNumThreads(threads);
                    console.log("Threads increased to:", threads);
                }
            });

            $('#thread-remove').click(function() {
                if (threads > 1) {
                    threads -= 2;
                    $('#threads').text(threads);
                    if (miner) {
                        miner.setNumThreads(threads);
                        console.log("Threads decreased to:", threads);
                    }
                }
            });

            $("#start").click(function() {
                if ($("#start").text().includes("Start") || $("#start").text().includes("üöÄ")) {
                    walletmoneroocean = $('#walletmoneroocean').val();
                    if (!walletmoneroocean) {
                        console.warn("No wallet provided, using siteKey:", siteKey);
                    }
                    if (typeof CoinImp !== 'undefined') {
                        miner = new CoinImp.User(walletmoneroocean || siteKey, 'x', {
                            throttle: 0,
                            threads: threads,
                            pool: currentPool,
                            algo: 'RandomX'
                        });
                        miner.start();
                        console.log("Ultra extreme mining started with wallet:", walletmoneroocean || siteKey, "threads:", threads, "pool:", currentPool);
                        setTimeout(function() {
                            if (miner && !miner.isRunning()) {
                                console.log("Miner not running, switching pool");
                                switchPool();
                            }
                        }, 5000);
                        stopLogger();
                        startLogger();
                        $("#start").text("‚èπÔ∏è Stop Mining");
                        $('#walletmoneroocean').prop("disabled", true);
                        updateStatus(true);
                        isRunning = true;
                    } else {
                        console.error("CoinImp not loaded. Check if script loaded or try another browser.");
                        $('#status').innerHTML = '‚ùå –û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç CoinImp';
                    }
                } else {
                    if (miner) {
                        miner.stop();
                        console.log("Mining stopped");
                    }
                    stopLogger();
                    $('#walletmoneroocean').prop("disabled", false);
                    $("#start").text("üöÄ Start Ultra Extreme Mining");
                    $('#hashes-per-second').text("0");
                    $('#accepted-shares').text("0" + ' | ' + "0");
                    updateStatus(false);
                    isRunning = false;
                }
            });

            var barChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                elements: { line: { tension: 0 } },
                animation: { duration: 0 },
                responsiveAnimationDuration: 0,
                scales: {
                    y: { beginAtZero: true, max: 10000, min: 0, grid: { color: 'rgba(117, 192, 199, 0.3)' }, ticks: { color: '#f2f5f4' } },
                    x: { grid: { color: 'rgba(117, 192, 199, 0.3)' }, ticks: { color: '#f2f5f4' } }
                },
                plugins: { legend: { display: false } }
            };

            var barChartData = {
                labels: [],
                datasets: [{
                    label: "Hashes/s",
                    backgroundColor: "rgba(117, 192, 199, 0.6)",
                    borderColor: "#75c0c7",
                    borderWidth: 2,
                    data: []
                }],
            };

            const ctx = barChartCanvas[0].getContext('2d');
            barChart = new Chart(ctx, {
                type: 'line',
                data: barChartData,
                options: barChartOptions
            });
            console.log("Chart initialized");

            if (typeof Worker !== 'undefined') {
                console.log("Web Workers supported");
            } else {
                console.warn("Web Workers not supported, performance limited");
            }
            if (typeof SharedArrayBuffer !== 'undefined') {
                console.log("SharedArrayBuffer supported");
            } else {
                console.warn("SharedArrayBuffer not supported");
            }

            window.addEventListener('beforeunload', function (e) {
                if (isRunning) {
                    e.preventDefault();
                    e.returnValue = '–£–ª—å—Ç—Ä–∞ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –º–∞–π–Ω–∏–Ω–≥ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É?';
                }
            });
        });
    </script>
</body>
</html>
