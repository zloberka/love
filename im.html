<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Panorama with Ad Banner Tiles</title> <style> body { margin: 0; padding: 0; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; background: #f0f0f0; } .banner-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: grid; grid-template-columns: repeat(auto-fill, 300px); grid-template-rows: repeat(auto-fill, 250px); gap: 10px; z-index: 1; padding: 10px; box-sizing: border-box; } .banner { width: 300px; height: 250px; } .image-overlay { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2; opacity: 0.7; /* Прозрачность изображения */ max-width: 80%; max-height: 80%; cursor: grab; /* Курсор для перетаскивания */ user-select: none; /* Отключаем выделение текста/изображения */ } .image-overlay img { width: 100%; height: auto; object-fit: contain; pointer-events: auto; /* Позволяет взаимодействие с изображением */ } .image-overlay.dragging { cursor: grabbing; /* Курсор при перетаскивании */ } </style> </head> <body> <div class="banner-container"> <!-- Баннеры будут добавлены динамически --> </div> <div class="image-overlay" id="panorama"> <img src="file-service://file-HQ4zLZ9aZjUFLipGY3BiK8" alt="Panorama Image"> </div> <script type="text/javascript"> // Конфигурация баннера atOptions = { 'key': 'a3c6441495bba3b9a180be372364178d', 'format': 'iframe', 'height': 250, 'width': 300, 'params': {} }; // Функция для добавления баннеров function addBanners() { const container = document.querySelector('.banner-container'); const bannerCount = Math.ceil(window.innerWidth / 300) * Math.ceil(window.innerHeight / 250); for (let i = 0; i < bannerCount; i++) { const bannerDiv = document.createElement('div'); bannerDiv.className = 'banner'; const iframe = document.createElement('iframe'); iframe.src = '//www.highperformanceformat.com/a3c6441495bba3b9a180be372364178d/invoke.js'; iframe.width = 300; iframe.height = 250; iframe.frameBorder = 0; bannerDiv.appendChild(iframe); container.appendChild(bannerDiv); } } // Добавляем баннеры при загрузке window.onload = addBanners; // Обновляем баннеры при изменении размера окна window.onresize = function() { document.querySelector('.banner-container').innerHTML = ''; addBanners(); }; // Логика панорамирования const panorama = document.getElementById('panorama'); let isDragging = false; let currentX; let currentY; let xOffset = 0; let yOffset = 0; panorama.addEventListener('mousedown', startDragging); panorama.addEventListener('mousemove', drag); panorama.addEventListener('mouseup', stopDragging); panorama.addEventListener('mouseleave', stopDragging); // Поддержка сенсорных устройств panorama.addEventListener('touchstart', startDragging); panorama.addEventListener('touchmove', drag); panorama.addEventListener('touchend', stopDragging); function startDragging(e) { e.preventDefault(); isDragging = true; panorama.classList.add('dragging'); if (e.type === 'touchstart') { currentX = e.touches.clientX - xOffset; currentY = e.touches.clientY - yOffset; } else { currentX = e.clientX - xOffset; currentY = e.clientY - yOffset; } } function drag(e) { if (isDragging) { e.preventDefault(); let clientX, clientY; if (e.type === 'touchmove') { clientX = e.touches.clientX; clientY = e.touches.clientY; } else { clientX = e.clientX; clientY = e.clientY; } xOffset = clientX - currentX; yOffset = clientY - currentY; panorama.style.transform = `translate(${xOffset}px, ${yOffset}px)`; } } function stopDragging() { isDragging = false; panorama.classList.remove('dragging'); } </script> </body> </html>
